{"ast":null,"code":"import _regeneratorRuntime from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link,Route}from'react-router-dom';import{indexReservations,deleteReservation,putReservation}from'../services/api_helper';import UpdateReservationForm from'./ReservationForm';var SingleHotel=/*#__PURE__*/function(_Component){_inherits(SingleHotel,_Component);function SingleHotel(props){var _this;_classCallCheck(this,SingleHotel);_this=_possibleConstructorReturn(this,_getPrototypeOf(SingleHotel).call(this,props));_this.setCurrentHotel=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));_this.componentDidMount=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var currentHotel,reservations;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(_this.props.hotels.length>0)){_context2.next=6;break;}currentHotel=_this.props.hotels.find(function(hotel){return parseInt(hotel.id)===parseInt(_this.props.hotelId);});_context2.next=4;return indexReservations(_this.props.hotelId);case 4:reservations=_context2.sent;_this.setState({reservations:reservations,currentHotel:currentHotel});// }else{\n//   const newHotel = await this.props.createHotel(this.state.hotel_name);\n//  this.setState({\n//    currentHotel: newHotel\n//  })\ncase 6:case\"end\":return _context2.stop();}}},_callee2);}));_this.deleteRes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(formData){var reservation_id,hotel_id,resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:reservation_id=formData.id;hotel_id=formData.hotel_id;console.log(reservation_id);_context3.next=5;return deleteReservation(reservation_id,hotel_id);case 5:resp=_context3.sent;case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x){return _ref3.apply(this,arguments);};}();_this.updateRes=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(formData){var reservation_id,hotel_id,resp;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:reservation_id=formData.id;hotel_id=formData.hotel_id;console.log(reservation_id);_context4.next=5;return putReservation(hotel_id,reservation_id,formData);case 5:resp=_context4.sent;case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x2){return _ref4.apply(this,arguments);};}();_this.state={currentHotel:null,reservations:[],hotel_name:\"\",test:false};return _this;}_createClass(SingleHotel,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.hotelId!==this.props.hotelId){this.setCurrentHotel();}}},{key:\"render\",value:function render(){var _this2=this;// console.log(this.props);\n// console.log(this.state.reservations);\nreturn React.createElement(\"div\",null,this.state.currentHotel&&React.createElement(React.Fragment,null,React.createElement(\"h1\",null,this.state.currentHotel.hotel_name),React.createElement(\"h4\",null,\"Your Reservation List \"),React.createElement(Link,{to:\"/hotels/\".concat(this.state.currentHotel.id,\"/Add\")}),this.state.reservations&&this.state.reservations.map(function(reservation){return React.createElement(\"div\",{className:\"resMetods\"},React.createElement(\"p\",null,reservation.reservation_desc),React.createElement(\"button\",{onClick:function onClick(){return _this2.deleteRes(reservation);}},\"DELETE\"),React.createElement(\"button\",{onClick:function onClick(){return _this2.updateRes(reservation);}},React.createElement(Link,{className:\"makeRes\",to:\"/hotels/\".concat(_this2.props.hotelId,\"/reservations/\").concat(reservation.id)},\"Update Reservation\")));}),React.createElement(Link,{className:\"makeRes\",to:\"/hotels/\".concat(this.props.hotelId,\"/reservations\")},\"Create Reservation\")));}}]);return SingleHotel;}(Component);export{SingleHotel as default};","map":{"version":3,"sources":["/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/src/components/SingleHotel.js"],"names":["React","Component","Link","Route","indexReservations","deleteReservation","putReservation","UpdateReservationForm","SingleHotel","props","setCurrentHotel","componentDidMount","hotels","length","currentHotel","find","hotel","parseInt","id","hotelId","reservations","setState","deleteRes","formData","reservation_id","hotel_id","console","log","resp","updateRes","state","hotel_name","test","prevProps","map","reservation","reservation_desc"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link, Route } from 'react-router-dom';\nimport { indexReservations, deleteReservation, putReservation } from '../services/api_helper';\nimport UpdateReservationForm from './ReservationForm';\n\n\nexport default class SingleHotel extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      currentHotel: null,\n      reservations: [],\n      hotel_name: \"\",\n      test: false\n\n    }\n  }\n\n  setCurrentHotel = async () => {\n  }\n\n  componentDidMount = async () => {\n    if (this.props.hotels.length > 0) {\n      const currentHotel = this.props.hotels.find(hotel => parseInt(hotel.id) === parseInt(this.props.hotelId));\n      const reservations = await indexReservations(this.props.hotelId);\n      this.setState({\n        reservations,\n        currentHotel\n      });\n      // }else{\n      //   const newHotel = await this.props.createHotel(this.state.hotel_name);\n      //  this.setState({\n      //    currentHotel: newHotel\n      //  })\n\n\n    }\n  }\n\n  deleteRes = async (formData) => {\n    let reservation_id = formData.id\n    let hotel_id = formData.hotel_id\n    console.log(reservation_id)\n    let resp = await deleteReservation(reservation_id, hotel_id)\n  }\n  updateRes = async (formData) => {\n    let reservation_id = formData.id\n    let hotel_id = formData.hotel_id\n    console.log(reservation_id)\n    let resp = await putReservation(hotel_id, reservation_id, formData)\n  }\n  componentDidUpdate(prevProps) {\n    if (prevProps.hotelId !== this.props.hotelId) {\n      this.setCurrentHotel();\n    }\n  }\n\n  render() {\n    // console.log(this.props);\n    // console.log(this.state.reservations);\n    return (\n      <div>\n        {this.state.currentHotel && (\n          <>\n            <h1>{this.state.currentHotel.hotel_name}</h1>\n            <h4>Your Reservation List </h4>\n            <Link to={`/hotels/${this.state.currentHotel.id}/Add`}>\n            </Link>\n            {this.state.reservations && this.state.reservations.map(reservation =>\n              <div className=\"resMetods\">\n                <p>{reservation.reservation_desc}</p>\n                <button onClick={() => this.deleteRes(reservation)}>DELETE</button>\n                {/* <a className=\"updateRes\" href={`/hotels/${this.props.hotelId}/reservations`}> */}\n                {/* <button onClick={()=> this.updateRes(reservation)}>UPDATE</button> */}\n                {/* </a> */}\n                {/* <Link to={`/hotels/${this.props.hotelId}/reservations`}>UPDATE</Link> */}\n                {/* <Link className=\"makeRes\" to={`/hotels/${this.props.hotelId}/reservations/${reservation.id}`}>Update Reservation</Link> */}\n               <button onClick={() => this.updateRes(reservation)}>\n                 <Link className=\"makeRes\" to={`/hotels/${this.props.hotelId}/reservations/${reservation.id}`}>Update Reservation</Link>\n                 </button>\n                 {/* UpdateReservationForm  */}\n               {/* </Link> */}\n              </div>\n            )}\n            \n             {/* <button onClick={() => this.props.createReservation(this.hotel_id, this.props.state)}> */}\n            <Link className=\"makeRes\" to={`/hotels/${this.props.hotelId}/reservations`}>Create Reservation</Link>\n            {/* <Link className=\"makeRes\" to={`/hotels/${this.props.hotelId}/reservations/${this.props.id}`}>Delete Reservation</Link> */}\n              {/* </button> */}\n          </>\n\n        )}\n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}