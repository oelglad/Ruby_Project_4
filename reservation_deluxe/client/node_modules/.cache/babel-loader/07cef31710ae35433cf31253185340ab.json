{"ast":null,"code":"import _regeneratorRuntime from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{registerUser,verifyUser,loginUser}from'./services/api_helper';import{Route,Link,Switch,withRouter}from'react-router-dom';import Home from'./components/Home';import Header from'./components/Header';import LoginForm from'./components/LoginForm';import Footer from'./components/Footer';import Overview from'./components/Overview';import ReservationContainer from'./components/ReservationContainer';import HotelContainer from'./components/HotelsContainer';import'./App.css';import SignUpForm from'./components/SignUpForm';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.handleRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,registerData){var currentUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return registerUser(registerData);case 3:currentUser=_context.sent;console.log(currentUser);if(!currentUser.errorMessage){_this.setState({currentUser:currentUser});_this.props.history.push('/hotels');}// } else {\n//   this.setState({ errorText: currentUser.errorMessage })\n// }\ncase 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,loginData){var currentUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return loginUser(loginData);case 3:currentUser=_context2.sent;_this.setState({currentUser:currentUser});_this.props.history.push('/hotels');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();_this.handleLogout=function(){_this.setState({currentUser:null});localStorage.removeItem('authToken');localStorage.removeItem('name');localStorage.removeItem('email');};_this.state={name:\"\",email:\"\",password:\"\",currentUser:null,errorText:\"\"};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){verifyUser();if(localStorage.getItem('authToken')){var name=localStorage.getItem('name');var email=localStorage.getItem('email');var user={name:name,email:email};console.log(user);user&&this.setState({currentUser:user});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"App\"},React.createElement(React.Fragment,null,React.createElement(Header,null),React.createElement(Route,{path:\"/login\",render:function render(){return React.createElement(LoginForm,{handleLogin:_this2.handleLogin});}}),this.state.currentUser?React.createElement(\"div\",null,React.createElement(\"h3\",null,\"Hello, \",this.state.currentUser.name),React.createElement(\"button\",{onClick:this.handleLogout,id:\"logoutButton\"},\"Logout\"),React.createElement(Link,{className:\"addHotel\",to:\"/hotels\"},\"Hotels\"),React.createElement(Route,{path:\"/hotels\",render:function render(){return React.createElement(HotelContainer,null);}}),React.createElement(ReservationContainer,null)):React.createElement(\"div\",null,React.createElement(Route,{path:\"/signup\",render:function render(){return React.createElement(SignUpForm,{handleRegister:_this2.handleRegister,errorText:_this2.state.errorText});}})),React.createElement(Route,{path:\"/\",render:function render(){return React.createElement(Home,null);}}),React.createElement(Overview,null),React.createElement(Footer,null)));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/src/App.js"],"names":["React","Component","registerUser","verifyUser","loginUser","Route","Link","Switch","withRouter","Home","Header","LoginForm","Footer","Overview","ReservationContainer","HotelContainer","SignUpForm","App","props","handleRegister","e","registerData","preventDefault","currentUser","console","log","errorMessage","setState","history","push","handleLogin","loginData","handleLogout","localStorage","removeItem","state","name","email","password","errorText","getItem","user"],"mappings":"wkCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,SAAnC,KAAoD,uBAApD,CACA,OAASC,KAAT,CAAgBC,IAAhB,CAAsBC,MAAtB,CAA8BC,UAA9B,KAAgD,kBAAhD,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,uBAArB,CACA,MAAOC,CAAAA,oBAAP,KAAiC,mCAAjC,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,MAAO,WAAP,CACA,MAAOC,CAAAA,UAAP,KAAuB,yBAAvB,C,GAEMC,CAAAA,G,6DACJ,aAAYC,KAAZ,CAAmB,qCACjB,qEAAMA,KAAN,GADiB,MAWnBC,cAXmB,0FAWF,iBAAOC,CAAP,CAAUC,YAAV,kIACfD,CAAC,CAACE,cAAF,GADe,sBAEWpB,CAAAA,YAAY,CAACmB,YAAD,CAFvB,QAETE,WAFS,eAGfC,OAAO,CAACC,GAAR,CAAYF,WAAZ,EACA,GAAI,CAACA,WAAW,CAACG,YAAjB,CAA+B,CAC7B,MAAKC,QAAL,CAAc,CAAEJ,WAAW,CAAXA,WAAF,CAAd,EACA,MAAKL,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EACD,CACD;AACA;AACA;AAVe,sDAXE,yEAwBnBC,WAxBmB,2FAwBL,kBAAOV,CAAP,CAAUW,SAAV,sIACZX,CAAC,CAACE,cAAF,GADY,uBAEclB,CAAAA,SAAS,CAAC2B,SAAD,CAFvB,QAENR,WAFM,gBAGZ,MAAKI,QAAL,CAAc,CAAEJ,WAAW,CAAXA,WAAF,CAAd,EACA,MAAKL,KAAL,CAAWU,OAAX,CAAmBC,IAAnB,CAAwB,SAAxB,EAJY,wDAxBK,2EA+BnBG,YA/BmB,CA+BJ,UAAM,CACnB,MAAKL,QAAL,CAAc,CACZJ,WAAW,CAAE,IADD,CAAd,EAGAU,YAAY,CAACC,UAAb,CAAwB,WAAxB,EACAD,YAAY,CAACC,UAAb,CAAwB,MAAxB,EACAD,YAAY,CAACC,UAAb,CAAwB,OAAxB,EACD,CAtCkB,CAEjB,MAAKC,KAAL,CAAa,CACXC,IAAI,CAAE,EADK,CAEXC,KAAK,CAAE,EAFI,CAGXC,QAAQ,CAAE,EAHC,CAIXf,WAAW,CAAE,IAJF,CAKXgB,SAAS,CAAE,EALA,CAAb,CAFiB,aASlB,C,6EA+BmB,CAClBpC,UAAU,GACV,GAAI8B,YAAY,CAACO,OAAb,CAAqB,WAArB,CAAJ,CAAuC,CACrC,GAAMJ,CAAAA,IAAI,CAAGH,YAAY,CAACO,OAAb,CAAqB,MAArB,CAAb,CACA,GAAMH,CAAAA,KAAK,CAAGJ,YAAY,CAACO,OAAb,CAAqB,OAArB,CAAd,CACA,GAAMC,CAAAA,IAAI,CAAG,CAAEL,IAAI,CAAJA,IAAF,CAAQC,KAAK,CAALA,KAAR,CAAb,CACAb,OAAO,CAACC,GAAR,CAAYgB,IAAZ,EACAA,IAAI,EAAI,KAAKd,QAAL,CAAc,CACpBJ,WAAW,CAAEkB,IADO,CAAd,CAAR,CAID,CACF,C,uCACQ,iBAEP,MAEE,4BAAK,SAAS,CAAC,KAAf,EACE,wCACE,oBAAC,MAAD,MADF,CAEE,oBAAC,KAAD,EAAO,IAAI,CAAC,QAAZ,CAAqB,MAAM,CAAE,wBAC3B,qBAAC,SAAD,EACE,WAAW,CAAE,MAAI,CAACX,WADpB,EAD2B,EAA7B,EAFF,CAaG,KAAKK,KAAL,CAAWZ,WAAX,CACC,+BACE,wCAAY,KAAKY,KAAL,CAAWZ,WAAX,CAAuBa,IAAnC,CADF,CAEE,8BAAQ,OAAO,CAAE,KAAKJ,YAAtB,CAAoC,EAAE,CAAC,cAAvC,WAFF,CAGE,oBAAC,IAAD,EAAM,SAAS,CAAC,UAAhB,CAA2B,EAAE,CAAC,SAA9B,WAHF,CAKE,oBAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,MAAM,CAAE,wBAAO,qBAAC,cAAD,MAAP,EAA9B,EALF,CAME,oBAAC,oBAAD,MANF,CADD,CAUC,+BACE,oBAAC,KAAD,EAAO,IAAI,CAAC,SAAZ,CAAsB,MAAM,CAAE,wBAC5B,qBAAC,UAAD,EACE,cAAc,CAAE,MAAI,CAACb,cADvB,CAEE,SAAS,CAAE,MAAI,CAACgB,KAAL,CAAWI,SAFxB,EAD4B,EAA9B,EADF,CAvBJ,CAqCE,oBAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,CAAgB,MAAM,CAAE,wBAAO,qBAAC,IAAD,MAAP,EAAxB,EArCF,CAsCE,oBAAC,QAAD,MAtCF,CAuCE,oBAAC,MAAD,MAvCF,CADF,CAFF,CA8CD,C,iBAtGetC,S,EAwGlB,cAAeO,CAAAA,UAAU,CAACS,GAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\nimport { registerUser, verifyUser, loginUser } from './services/api_helper';\nimport { Route, Link, Switch, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport Header from './components/Header';\nimport LoginForm from './components/LoginForm';\nimport Footer from './components/Footer';\nimport Overview from './components/Overview';\nimport ReservationContainer from './components/ReservationContainer';\nimport HotelContainer from './components/HotelsContainer';\nimport './App.css';\nimport SignUpForm from './components/SignUpForm';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      currentUser: null,\n      errorText: \"\"\n    }\n  }\n\n  handleRegister = async (e, registerData) => {\n    e.preventDefault();\n    const currentUser = await registerUser(registerData);\n    console.log(currentUser)\n    if (!currentUser.errorMessage) {\n      this.setState({ currentUser });\n      this.props.history.push('/hotels');\n    }\n    // } else {\n    //   this.setState({ errorText: currentUser.errorMessage })\n    // }\n  }\n\n  handleLogin = async (e, loginData) => {\n    e.preventDefault();\n    const currentUser = await loginUser(loginData);\n    this.setState({ currentUser });\n    this.props.history.push('/hotels');\n  }\n\n  handleLogout = () => {\n    this.setState({\n      currentUser: null\n    })\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('name');\n    localStorage.removeItem('email');\n  }\n\n  componentDidMount() {\n    verifyUser();\n    if (localStorage.getItem('authToken')) {\n      const name = localStorage.getItem('name');\n      const email = localStorage.getItem('email');\n      const user = { name, email };\n      console.log(user);\n      user && this.setState({\n        currentUser: user\n\n      })\n    }\n  }\n  render() {\n\n    return (\n\n      <div className=\"App\">\n        <>\n          <Header />\n          <Route path=\"/login\" render={() => (\n            <LoginForm\n              handleLogin={this.handleLogin}\n            />\n          )} />          \n          {/* <Route path=\"/\" render={() => (<Home />)} /> */}\n          {/* <Route path=\"/login\" render={() => (\n            <LoginForm\n              handleLogin={this.handleLogin}\n            />\n          )} /> */}\n          {this.state.currentUser ?\n            <div>\n              <h3>Hello, {this.state.currentUser.name}</h3>\n              <button onClick={this.handleLogout} id=\"logoutButton\">Logout</button>\n              <Link className=\"addHotel\" to=\"/hotels\">Hotels</Link>\n              {/* <Route path=\"/\" render={() => (<Home />)} /> */}\n              <Route path=\"/hotels\" render={() => (<HotelContainer />)} />\n              <ReservationContainer />\n            </div>\n            :\n            <div>\n              <Route path=\"/signup\" render={() => (\n                <SignUpForm\n                  handleRegister={this.handleRegister}\n                  errorText={this.state.errorText}\n                />\n              )} />\n            </div>\n          }\n          {/* <Route path=\"/overview\" render={() => (<Overview />)} /> */}\n          {/* <Route path=\"/hotels/:id/reservations\" render={() => (\n            <ReservationForm\n              createReservation={this.createReservation}\n            />)} /> */}\n          <Route path=\"/\" render={() => (<Home />)} />\n          <Overview />\n          <Footer />\n        </>\n      </div>\n    );\n  }\n}\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}