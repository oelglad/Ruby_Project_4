{"ast":null,"code":"var _jsxFileName = \"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_rest/client/src/App.js\";\nimport React, { Component } from 'react';\nimport { registerUser, verifyUser, loginUser } from './services/api_helper';\nimport { Route, Link, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport Header from './components/Header';\nimport LoginForm from './components/LoginForm';\nimport './App.css';\nimport SignUpForm from './components/SignUpForm';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRegister = async (e, registerData) => {\n      e.preventDefault();\n      const currentUser = await registerUser(registerData);\n\n      if (!currentUser.errorMessage) {\n        this.setState({\n          currentUser\n        });\n        this.props.history.push('/reservations');\n      } else {\n        this.setState({\n          errorText: currentUser.errorMessage\n        });\n      }\n    };\n\n    this.handleLogin = async (e, loginData) => {\n      e.preventDefault();\n      const currentUser = await loginUser(loginData);\n      this.setState({\n        currentUser\n      });\n      this.props.history.push('/reservations');\n    };\n\n    this.handleLogout = () => {\n      this.setState({\n        currentUser: null\n      });\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('name');\n      localStorage.removeItem('email');\n    };\n\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      currentUser: null,\n      register: false,\n      reservations: [],\n      errorText: \"\"\n    };\n  }\n\n  componentDidMount() {\n    verifyUser();\n\n    if (localStorage.getItem('authToken')) {\n      const name = localStorage.getItem('name');\n      const email = localStorage.getItem('email');\n      const user = {\n        name,\n        email\n      };\n      user && this.setState({\n        currentUser: user\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, this.state.currentUser ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"Hello, \", this.state.currentUser.name), React.createElement(\"button\", {\n      onClick: this.handleLogout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Logout\")) : React.createElement(\"nav\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72\n      },\n      __self: this\n    }, \"SignUp\")), React.createElement(Link, {\n      to: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, \"Login\"))), React.createElement(Route, {\n      path: \"/login\",\n      render: () => React.createElement(LoginForm, {\n        handleLogin: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signup\",\n      render: () => React.createElement(SignUpForm, {\n        handleRegister: this.handleRegister,\n        errorText: this.state.errorText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }), React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Home, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_rest/client/src/App.js"],"names":["React","Component","registerUser","verifyUser","loginUser","Route","Link","withRouter","Home","Header","LoginForm","SignUpForm","App","constructor","props","handleRegister","e","registerData","preventDefault","currentUser","errorMessage","setState","history","push","errorText","handleLogin","loginData","handleLogout","localStorage","removeItem","state","name","email","password","register","reservations","componentDidMount","getItem","user","render"],"mappings":"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","sourcesContent":["import React, { Component}from 'react';\nimport { registerUser, verifyUser, loginUser } from './services/api_helper';\nimport { Route, Link, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport Header from './components/Header';\nimport LoginForm from './components/LoginForm';\nimport './App.css';\nimport SignUpForm from './components/SignUpForm';\n\nclass App extends Component {\n  constructor(props){\n    super(props);\n    this.state={\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      currentUser: null,\n      register: false,\n      reservations:[],\n      errorText: \"\"\n    }\n  }\n\n  handleRegister = async (e,  registerData) => {\n    e.preventDefault();\n    const currentUser = await registerUser(registerData);\n  if (!currentUser.errorMessage){\n    this.setState({ currentUser});\n     this.props.history.push('/reservations');\n  } else {\n    this.setState({errorText: currentUser.errorMessage})\n  }\n  }\n\n  handleLogin = async (e, loginData) => {\n    e.preventDefault();\n    const currentUser = await loginUser(loginData);\n    this.setState({ currentUser });\n    this.props.history.push('/reservations');\n  }\n\n  handleLogout = () => {\n    this.setState({\n      currentUser: null\n    })\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('name');\n    localStorage.removeItem('email');\n  }\n\n  componentDidMount() {\n    verifyUser();\n    if (localStorage.getItem('authToken')) {\n      const name = localStorage.getItem('name');\n      const email = localStorage.getItem('email');\n      const user = {name, email};\n      user && this.setState({\n        currentUser: user\n      })\n    }\n  }\n  render(){\n  return (\n    <div className=\"App\">\n    {this.state.currentUser ? \n    <div>\n      <h1>Hello, {this.state.currentUser.name}</h1>\n      <button onClick={this.handleLogout}>Logout</button>\n      </div>\n      :\n      <nav>\n        <Link to=\"/signup\"><button>SignUp</button></Link>\n        <Link to=\"/login\"><button>Login</button></Link>\n        </nav>\n        }\n        <Route path=\"/login\" render={() => (\n          <LoginForm\n          handleLogin={this.handleLogin}\n          />\n        )} />\n        <Route path=\"/signup\" render={() => (\n          <SignUpForm\n          handleRegister={this.handleRegister}\n          errorText={this.state.errorText}\n          />\n        )} />\n        <Header/>\n     <Home />\n    </div>\n  );\n}\n}\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}