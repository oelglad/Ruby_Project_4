{"ast":null,"code":"import _regeneratorRuntime from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{registerUser,verifyUser,loginUser,putReservation}from'./services/api_helper';import{Route,Link,Switch,withRouter}from'react-router-dom';import Home from'./components/Home';import Header from'./components/Header';import LoginForm from'./components/LoginForm';import Footer from'./components/Footer';// import Overview from './components/Overview';\nimport ReservationContainer from'./components/ReservationContainer';import HotelContainer from'./components/HotelsContainer';import'./App.css';import SignUpForm from'./components/SignUpForm';import UpdateReservationForm from'./components/UpdateReservationForm';var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.handleRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,registerData){var currentUser;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return registerUser(registerData);case 3:currentUser=_context.sent;if(!currentUser.errorMessage){_this.setState({currentUser:currentUser});_this.props.history.push('/hotels');}// else {\n//   this.setState({ errorText: currentUser.errorMessage })\n// }\ncase 5:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.handleLogin=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e,loginData){var currentUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return loginUser(loginData);case 3:currentUser=_context2.sent;_this.setState({currentUser:currentUser});_this.props.history.push('/hotels');case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref2.apply(this,arguments);};}();_this.handleLogout=function(){_this.setState({currentUser:null});localStorage.removeItem('authToken');localStorage.removeItem('name');localStorage.removeItem('email');};_this.updateRes=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(hotel_id,reservation_id,formData){var resp;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:console.log(reservation_id);_context3.next=3;return putReservation(hotel_id,reservation_id,formData);case 3:resp=_context3.sent;case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x5,_x6,_x7){return _ref3.apply(this,arguments);};}();_this.state={name:\"\",email:\"\",password:\"\",currentUser:null,errorText:\"\"};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){verifyUser();if(localStorage.getItem('authToken')){var name=localStorage.getItem('name');var email=localStorage.getItem('email');var user={name:name,email:email};user&&this.setState({currentUser:user});}}},{key:\"render\",value:function render(){var _this2=this;return React.createElement(\"div\",{className:\"App\"},React.createElement(React.Fragment,null,React.createElement(Header,null),React.createElement(Route,{path:\"/login\",render:function render(){return React.createElement(LoginForm,{handleLogin:_this2.handleLogin});}}),this.state.currentUser?React.createElement(\"div\",null,React.createElement(\"h3\",null,\"Hello,\",this.state.currentUser.name,React.createElement(\"button\",{onClick:this.handleLogout,id:\"logoutButton\"},\"Logout\")),React.createElement(Link,{className:\"addHotelList\",to:\"/hotels\"},\"Your Hotel List\"),React.createElement(ReservationContainer,null)):React.createElement(\"div\",null,React.createElement(Route,{path:\"/signup\",render:function render(){return React.createElement(SignUpForm,{handleRegister:_this2.handleRegister,errorText:_this2.state.errorText});}})),React.createElement(Route,{exact:true,path:\"/hotels/:hotel_id/reservations/:res_id\",render:function render(props){return React.createElement(UpdateReservationForm,{hotelId:props.match.params.hotel_id,resId:props.match.params.res_id,updateRes:_this2.updateRes});}}),React.createElement(Route,{path:\"/\",render:function render(){return React.createElement(Home,null);}}),React.createElement(Route,{path:\"/hotels\",render:function render(){return React.createElement(HotelContainer,null);}}),React.createElement(Footer,null)));}}]);return App;}(Component);export default withRouter(App);","map":{"version":3,"sources":["/Users/omniaelglad/Desktop/ruby/Ruby_Project_4/reservation_deluxe/client/src/App.js"],"names":["React","Component","registerUser","verifyUser","loginUser","putReservation","Route","Link","Switch","withRouter","Home","Header","LoginForm","Footer","ReservationContainer","HotelContainer","SignUpForm","UpdateReservationForm","App","props","handleRegister","e","registerData","preventDefault","currentUser","errorMessage","setState","history","push","handleLogin","loginData","handleLogout","localStorage","removeItem","updateRes","hotel_id","reservation_id","formData","console","log","resp","state","name","email","password","errorText","getItem","user","match","params","res_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { registerUser, verifyUser, loginUser, putReservation } from './services/api_helper';\nimport { Route, Link, Switch, withRouter } from 'react-router-dom';\nimport Home from './components/Home';\nimport Header from './components/Header';\nimport LoginForm from './components/LoginForm';\nimport Footer from './components/Footer';\n// import Overview from './components/Overview';\nimport ReservationContainer from './components/ReservationContainer';\nimport HotelContainer from './components/HotelsContainer';\nimport './App.css';\nimport SignUpForm from './components/SignUpForm';\nimport UpdateReservationForm from './components/UpdateReservationForm';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      name: \"\",\n      email: \"\",\n      password: \"\",\n      currentUser: null,\n      errorText: \"\"\n    }\n  }\n\n  handleRegister = async (e, registerData) => {\n    e.preventDefault();\n    const currentUser = await registerUser(registerData);\n    if (!currentUser.errorMessage) {\n      this.setState({ currentUser });\n      this.props.history.push('/hotels');\n    } \n    // else {\n    //   this.setState({ errorText: currentUser.errorMessage })\n    // }\n  }\n\n  handleLogin = async (e, loginData) => {\n    e.preventDefault();\n    const currentUser = await loginUser(loginData);\n    this.setState({ currentUser });\n    this.props.history.push('/hotels');\n  }\n\n  handleLogout = () => {\n    this.setState({\n      currentUser: null\n    })\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('name');\n    localStorage.removeItem('email');\n  }\n\n  componentDidMount() {\n    verifyUser();\n    if (localStorage.getItem('authToken')) {\n      const name = localStorage.getItem('name');\n      const email = localStorage.getItem('email');\n      const user = { name, email };\n      user && this.setState({\n        currentUser: user\n\n      })\n    }\n  }\n\n  updateRes = async (hotel_id, reservation_id, formData) => {\n    console.log(reservation_id)\n    let resp = await putReservation(hotel_id, reservation_id, formData)\n  }\n\n  render() {\n\n    return (\n\n      <div className=\"App\">\n        <>\n          <Header />\n          <Route path=\"/login\" render={() => (\n            <LoginForm\n              handleLogin={this.handleLogin}\n            />\n          )} />\n          {this.state.currentUser ?\n            <div>\n              <h3>Hello, \n              {this.state.currentUser.name} \n              <button onClick={this.handleLogout} id=\"logoutButton\">Logout</button>\n              </h3>\n              {/* <button onClick={this.handleLogout} id=\"logoutButton\">Logout</button> */}\n              <Link className=\"addHotelList\" to=\"/hotels\">Your Hotel List</Link>\n              {/* <Route path=\"/hotels\" render={() => (<HotelContainer />)} /> */}\n              <ReservationContainer />\n            </div>\n            :\n            <div>\n              <Route path=\"/signup\" render={() => (\n                <SignUpForm\n                  handleRegister={this.handleRegister}\n                  errorText={this.state.errorText}\n                />\n              )} />\n            </div>\n          }\n          {/* <Route path=\"/overview\" render={() => (<Overview />)} /> */}\n          {/* <Route path=\"/hotels/:id/reservations\" render={() => (\n            <ReservationForm\n              createReservation={this.createReservation}\n            />)} /> */}\n          <Route exact path={`/hotels/:hotel_id/reservations/:res_id`}\n            render={(props) => <UpdateReservationForm\n              hotelId={props.match.params.hotel_id}\n              resId={props.match.params.res_id}\n              updateRes={this.updateRes}\n\n            />}\n          />\n          <Route path=\"/\" render={() => (<Home />)} />\n          <Route path=\"/hotels\" render={() => (<HotelContainer />)} />\n          {/* <Overview /> */}\n          <Footer />\n        </>\n      </div>\n    );\n  }\n}\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}